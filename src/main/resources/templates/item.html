<!DOCTYPE html>
<html lang="en" translate="yes" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/base :: head_base(~{::title})">
  <title th:text="${item.name} + ' | Libermall'">Libermall - an NFT marketplace</title>
</head>
<body v-scope="{imageEnlarged: false}">
<header th:replace="fragments/header :: header"></header>
<main class="main-page">
  <section class="item-details section pt-5">
    <div class="container-fluid">
      <div class="row justify-content-center">
        <div class="col-md-10 col-lg-12 col-xxl-9">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-5 ms-3">
              <li class="breadcrumb-item"><a href="/explore">Explore</a></li>
              <li class="breadcrumb-item" th:if="${collection != null}">
                <a href="/collection"
                   th:href="'/collection/' + ${addressHelper.toRaw(collection.address)}"
                   th:text="${collection.name}"
                >
                  Collection
                </a>
              </li>
              <li aria-current="page" class="breadcrumb-item active" th:text="${item.name}">Item</li>
            </ol>
          </nav>
          <div class="row justify-content-center mb-4">
            <div class="col-lg-5 col-xl-5 mb-4 mb-lg-0">
              <!--/* Start NFT Image */-->
              <div class="position-sticky" style="top: 140px;">
                <img alt="Item Image" class="item-details__image"
                     src="../static/img/item-details-image.jpg"
                     th:alt="${item.name}"
                     th:src="${item.image}"
                     v-on:click="imageEnlarged = !imageEnlarged"
                >
              </div>
              <!--/* End NFT Image */-->
            </div>
            <div class="col-lg-7 col-xl-7">
              <!--/* Start Desc Card */-->
              <div class="card-item-details mb-5">
                <div class="item-details__badge mb-4" th:if="${item.fullPrice == null}">Not for sale</div>
                <div class="item-details__badge badge__green mb-4" th:if="${item.fullPrice != null}">For Sale</div>
                <h1 class="item-details__title mb-3" th:text="${item.name}">Item</h1>
                <p class="item-details__desc mb-0" th:text="${item.description}"></p>
              </div>
              <!--/* End Desc Card */-->
              <!--/* Start Action Link */-->
              <!--/*
              <div class="card-item-details d-flex align-items-center border bg-soft px-4 py-3 rounded mb-4">
                <button class="btn btn-sm btn-details__like bg-soft px-3" type="button">
                  <i class="fa-regular fa-heart m-0 me-sm-2"></i>
                  <span class="d-block d-sm-inline mt-1 mt-sm-0">24</span>
                </button>
                <div class="nav-item-details d-flex align-items-center fs-18 ms-auto">
                  <button class="btn btn-sm px-2 px-3 me-1" type="button"><i
                    class="fa-regular fa-arrows-rotate d-block d-sm-inline mb-2 mt-sm-0 m-0 me-sm-2"
                  ></i> Refresh
                  </button>
                  <button class="btn btn-sm px-2 px-3 me-1" data-bs-target="#ShareModal" data-bs-toggle="modal"
                          type="button"
                  ><i class="fa-regular fa-share-nodes d-block d-sm-inline mb-2 mt-sm-0 m-0 me-sm-2"></i> Share
                  </button>
                  <div class="dropdown">
                    <button aria-expanded="false" class="btn btn-sm btn-cube" data-bs-toggle="dropdown"
                            id="dropdownMenuButton1"
                            type="button"
                    >
                      <i class="fa-solid fa-ellipsis fs-20"></i>
                    </button>
                    <ul aria-labelledby="dropdownMenuButton1" class="dropdown-menu">
                      <li><a class="dropdown-item" href="#">Place floor bid</a></li>
                      <li><a class="dropdown-item" href="#">New bid</a></li>
                      <li><a class="dropdown-item" href="#">Report</a></li>
                    </ul>
                  </div>
                </div>
              </div>
              /*-->
              <!--/* End Action Link */-->
              <!--/* Start Price Card */-->
              <div class="card-item-details border bg-soft p-4 rounded mb-4" th:if="${item.fullPrice != null}">
                <div class="d-flex align-items-center mb-2">
                  <span class="d-block text-uppercase fs-18 fw-medium">Price:</span>
                  <span class="price-item__ton d-block ms-auto" th:text="|{{fromNano('${item.fullPrice}')}} TON|"
                  >NaN</span>
                </div>
                <div class="d-flex align-items-center mb-4">
                  <span class="color-grey"
                        th:text="|Plus a network fee of {{ fromNano('${item.minimalGasFee}') }} TON|"
                  ></span>
                  <!--/*
                  <span class="price-item__dollar d-block color-grey text-end ms-auto">$64.09</span>
                  */-->
                </div>
                <button class="btn btn-primary w-100" data-bs-target="#BuyModal" data-bs-toggle="modal"
                        th:attr="v-if=|!connection.isUserWallet('${addressHelper.toRaw(item.owner)}')|"
                        type="button"
                >Buy Now
                </button>
                <button class="btn btn-secondary w-100" data-bs-target="#CancelModal" data-bs-toggle="modal"
                        th:attr="v-if=|connection.isUserWallet('${addressHelper.toRaw(item.owner)}')|"
                        type="button"
                >Cancel Sale
                </button>
              </div>
              <div class="card-item-details d-flex flex-wrap border bg-soft p-2 rounded mb-4"
                   th:attr="v-if=|connection.isUserWallet('${addressHelper.toRaw(item.owner)}')|"
                   th:if="${item.fullPrice == null}"
              >
                <button class="btn btn-primary flex-fill m-2" data-bs-target="#SellModal" data-bs-toggle="modal"
                        type="button"
                >
                  Put Up For Sale
                </button>
                <button class="btn btn-soft flex-fill m-2" data-bs-target="#TransferModal" data-bs-toggle="modal"
                        th:if="${item.fullPrice == null}" type="button"
                >
                  Transfer Ownership
                </button>
              </div>
              <!--/* End Price Card */-->
              <!--/* Start Owner & Collection */-->
              <div class="row">
                <div class="col-xl-6 mx-auto mb-4">
                  <a class="card-item-details d-block border bg-soft hover px-4 py-3 rounded text-white"
                     href="/profile"
                     th:href="'/profile/' + ${addressHelper.toRaw(item.owner)}"
                  >
                    <h4 class="fs-14 color-grey mb-4">Owner</h4>
                    <div class="d-flex align-items-center">
                      <img alt="" class="img-fluid rounded-circle" height="40" src="../static/img/user-1.svg"
                           th:src="@{/img/user-1.svg}"
                           width="40"
                      >
                      <h4 class="collection__name fs-16 mb-0 ms-3"
                          th:text="${addressHelper.toShortFriendly(item.owner)}"
                      >...</h4>
                      <i class="fa-solid fa-angle-right color-grey ms-auto"></i>
                    </div>
                  </a>
                </div>
                <div class="col-xl-6 mb-4">
                  <a class="card-item-details d-block border bg-soft hover px-4 py-3 rounded text-white"
                     href="/explore"
                     th:href="${collection == null} ? '/explore' : '/collection/' + ${addressHelper.toRaw(collection.address)}"
                  >
                    <h4 class="fs-14 color-grey mb-4">Collection</h4>
                    <div class="d-flex align-items-center">
                      <img alt="" class="img-fluid rounded-circle" src="../static/img/author/author-17.jpg"
                           th:src="${collection?.image}" width="40"
                      >
                      <h4 class="collection__name fs-16 mb-0 ms-3" th:text="${collection?.name}">
                        Not In Collection
                      </h4>
                      <i class="fa-solid fa-angle-right color-grey ms-auto"></i>
                    </div>
                  </a>
                </div>
              </div>
              <!--/* End Owner & Collection */-->
              <!--/* Start Details Card */-->
              <div class="card-item-details border bg-soft p-4 rounded">
                <h4 class="fs-18 mb-4">Details</h4>
                <ul class="list-unstyled">
                  <li class="mb-3">
                    <a class="d-flex align-items-center p-3 rounded border hover text-white"
                       href="#"
                       target="_blank"
                       th:href="'https://testnet.tonscan.org/address/' + ${addressHelper.toRaw(item.address)}"
                    >
                      <span class="fw-medium color-grey">Contract Address</span>
                      <span class="col-4 text-truncate ms-auto text-end"
                            th:text="${addressHelper.toShortFriendly(item.address)}"
                      ></span>
                      <i class="fa-solid fa-angle-right color-grey ms-3"></i>
                    </a>
                  </li>
                  <li class="mb-3" th:if="${item.fullPrice != null}">
                    <a class="d-flex align-items-center p-3 rounded border hover text-white"
                       href="#"
                       target="_blank"
                       th:href="'https://testnet.tonscan.org/address/' + ${addressHelper.toRaw(item.sale)}"
                    >
                      <span class="fw-medium color-grey">Sale Contract</span>
                      <span class="col-4 text-truncate ms-auto text-end"
                            th:text="${addressHelper.toShortFriendly(item.sale)}"
                      ></span>
                      <i class="fa-solid fa-angle-right color-grey ms-3"></i>
                    </a>
                  </li>
                  <!--/*
                  <li class="d-flex align-items-center p-3 rounded border hover text-white mb-3">
                    <span class="fw-medium color-grey">Metadata</span>
                    <span class="text-truncate ms-auto">Centralized</span>
                  </li>
                  */-->
                </ul>
              </div>
              <!--/* End Details Card */-->
            </div>
          </div>
          <!--/* Start Attributes Card */-->
          <div class="card-item-details border bg-soft p-4 rounded mb-5" th:unless="${#maps.isEmpty(item.attributes)}">
            <h4 class="fs-18 mb-4">Attributes</h4>
            <ul class="row list-unstyled">
              <li class="col-lg-6 col-xl-4 mb-3" th:each="attribute: ${item.attributes}">
                <a class="d-flex align-items-center p-3 rounded border hover text-white" href="#!">
                  <div>
                    <span class="d-block fs-14 fw-medium color-grey mb-2" th:text="${attribute.key}">Trait</span>
                    <span class="d-block fw-medium" th:text="${attribute.value}"></span>
                  </div>
                  <!--/*
                  <div class="ms-auto">
                    <span class="d-block fs-14 fw-medium color-grey text-end mb-2">Rarity</span>
                    <div class="d-flex fs-14">
                      <span>22/100</span>
                      <span class="mx-1">~</span>
                      <span class="fw-medium text-end">17.1%</span>
                    </div>
                  </div>
                  <i class="fa-solid fa-angle-right color-grey ms-5"></i>
                  */-->
                </a>
              </li>
            </ul>
          </div>
          <!--/* End Attributes Card */-->

          <!--/* Start Transaction Table */-->
          <!--/*
          <h4 class="mb-3 fs-28 px-2">Transaction History</h4>
          <div class="card-item-details border bg-soft rounded mt-4 table-responsive">
            <table class="table text-white mb-0">
              <thead>
              <tr class="border-bottom">
                <th class="p-4" scope="col">Type</th>
                <th class="p-4" scope="col">Price</th>
                <th class="p-4" scope="col">From</th>
                <th class="p-4" scope="col">To</th>
                <th class="p-4" scope="col">Date</th>
              </tr>
              </thead>
              <tbody>
              <tr class="hover">
                <td class="p-4">
                  <i class="fa-regular fa-cart-shopping-fast fs-18 me-2"></i>
                  <span class="fw-medium">Sale</span>
                </td>
                <td class="p-4">38 TON</td>
                <td class="p-4">
                  <a class="d-block text-truncate" href="/profile.php" style="max-width: 150px;" target="_blank">
                    <i class="fa-regular fa-circle-user me-2"></i>EQDZr7KDKG0R4Kyauz-iRetnuY7nMKXFIEQn4-44vzygNEvj
                  </a>
                </td>
                <td class="p-4">
                  <a class="d-block text-truncate" href="/profile.php" style="max-width: 150px;" target="_blank">
                    <i class="fa-regular fa-circle-user me-2"></i>antonov
                  </a>
                </td>
                <td class="p-4"><i class="fa-regular fa-timer me-2"></i> 2 hours ago</td>
              </tr>
              <tr class="hover">
                <td class="p-4">
                  <i class="fa-regular fa-arrow-right-arrow-left me-2"></i>
                  <span class="fw-medium">Transfer</span>
                </td>
                <td class="p-4"></td>
                <td class="p-4">
                  <a class="d-block text-truncate" href="/profile.php" style="max-width: 150px;" target="_blank">
                    <i class="fa-regular fa-circle-user me-2"></i>EQDZr7KDKG0R4Kyauz-iRetnuY7nMKXFIEQn4-44vzygNEvj
                  </a>
                </td>
                <td class="p-4">
                  <a class="d-block text-truncate" href="/profile.php" style="max-width: 150px;" target="_blank">
                    <i class="fa-regular fa-circle-user me-2"></i>antonov
                  </a>
                </td>
                <td class="p-4"><i class="fa-regular fa-timer me-2"></i> 12 hours ago</td>
              </tr>
              <tr class="hover">
                <td class="p-4">
                  <i class="fa-regular fa-coin-blank me-2"></i>
                  <span class="fw-medium">Mint</span>
                </td>
                <td class="p-4">40 TON</td>
                <td class="p-4">
                  <a class="d-block text-truncate" href="/profile.php" style="max-width: 150px;" target="_blank">
                    <i class="fa-regular fa-circle-user me-2"></i>EQDZr7KDKG0R4Kyauz-iRetnuY7nMKXFIEQn4-44vzygNEvj
                  </a>
                </td>
                <td class="p-4">
                  <a class="d-block text-truncate" href="/profile.php" style="max-width: 150px;" target="_blank">
                    <i class="fa-regular fa-circle-user me-2"></i>antonov
                  </a>
                </td>
                <td class="p-4"><i class="fa-regular fa-timer me-2"></i> 1 day ago</td>
              </tr>
              </tbody>
            </table>
          </div>
          */-->
          <!--/* End Transaction Table */-->
        </div>
      </div>
    </div>
  </section>
</main>
<!--/*<section th:replace="fragments/partners :: partners"></section>*/-->
<footer th:replace="fragments/footer :: footer"></footer>
<div th:replace="modals/connect :: #ConnectModal"></div>
<div th:replace="modals/buy :: buy_modal(${item}, ${collection})"></div>
<div th:replace="modals/cancel :: cancel_modal(${item}, ${collection})"></div>
<div th:replace="modals/sell :: sell_modal(${item})"></div>
<div th:replace="modals/transfer :: transfer_modal(${item})"></div>
<div class="item-details__image--size"
     style="width: 100%; height: 100%; position: fixed; z-index: 10000; top:0; left: 0; cursor: zoom-out;"
     th:styleappend="'background: rgba(5, 11, 28, .5) url(' + ${item.image} + ') no-repeat center; background-size: contain; '"
     v-if="imageEnlarged"
     v-on:click="imageEnlarged = !imageEnlarged"

></div>

<script defer th:src="@{/bundle/index.js}"></script>
</body>
</html>
